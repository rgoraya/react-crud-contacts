(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(27)},19:function(e,t,a){},21:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);a(13);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(19),a(1)),s=a(2),i=a(4),d=a(3),m=a(5),u=(a(21),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={searchStr:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;switch(this.props.view){case"view_all":return r.a.createElement("div",{className:"show-all-header"},r.a.createElement("div",{className:"d-flex align-items-stretch justify-content-between"},r.a.createElement("h2",{className:"font-light"},"Contacts"),r.a.createElement("p",{className:"h2 link btn btn-link btn-dark text-light shadow-sm",onClick:function(t){e.props.onHeaderViewChange("new")}},r.a.createElement("span",{className:"oi oi-plus"}))),r.a.createElement("form",{className:"mt-3"},r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"border border-bottom text-muted input-group-text bg-dark border-secondary rounded-0 border-top-0 border-left-0 border-right-0"},r.a.createElement("span",{className:"oi oi-magnifying-glass align-bottom"}))),r.a.createElement("input",{type:"text",className:"form-control bg-dark bg-dark border border-bottom text-light border-secondary rounded-0 border-top-0 border-left-0 border-right-0",id:"searchContacts",placeholder:"Search",value:this.state.searchStr,onChange:function(t){return e.handleSearch(t)}}))));case"view":return r.a.createElement("div",null,r.a.createElement("div",{className:"view-header"},r.a.createElement("div",{className:"d-flex align-content-center justify-content-between"},r.a.createElement("button",{className:"btn btn-link px-0 text-light font-light m-0",onClick:function(){e.props.onHeaderViewChange("view_all")}},"\u27e8 Contacts"),r.a.createElement("button",{className:"btn btn-dark shadow-sm font-light m-0",onClick:function(){e.props.onHeaderViewChange("edit")}},r.a.createElement("span",{className:"oi oi-pencil"})))));case"edit":case"new":return r.a.createElement("div",{className:"new-header"},r.a.createElement("div",{className:"d-flex align-content-center justify-content-between"},r.a.createElement("button",{className:"btn btn-link px-0 text-light font-light m-0",onClick:function(t){e.props.onHeaderViewChange("view_all")}},"\u27e8 Contacts"),r.a.createElement("button",{className:"btn btn-dark shadow-sm font-light m-0",type:"submit",form:"contact_form"},r.a.createElement("span",{className:"oi oi-check"}))));default:return r.a.createElement("div",null,"Contacts")}}},{key:"handleSearch",value:function(e){var t=this,a=e.target.value;this.setState({searchStr:a}),clearTimeout(this.timer),this.timer=setTimeout(function(){t.props.handleSearch(t.state.searchStr)},500)}}]),t}(n.Component)),p=function(e){return r.a.createElement("a",{href:"#",className:"list-group-item bg-dark border-top-0 border-left-0 border-right-0 border-secondary mb-0 rounded-0",onClick:function(t){t.preventDefault(),e.handleContactClick(t)}},r.a.createElement("h5",{className:"mb-0 text-capitalize text-light font-light"},e.contact.name),r.a.createElement("p",{className:"text-muted font-light mb-0"},e.contact.phone_number))},h=function(e){var t="https://api.adorable.io/avatars/400/".concat(e.identifier);return r.a.createElement("div",{className:"w-50 h-50 mb-4 mx-auto profile-picture-container"},r.a.createElement("img",{className:"rounded-circle img-fluid",src:t,alt:"profile"}))},b=function(e){return r.a.createElement("div",{className:"p-4"},r.a.createElement("div",{className:"mb-4 text-center"},r.a.createElement(h,{identifier:e.contact.email}),r.a.createElement("h3",{className:"font-light mb-4"},e.contact.name)),r.a.createElement("div",{className:"position-relative"},r.a.createElement("span",{className:"oi oi-phone text-muted mr-3 align-middle pt-1 position-absolute"}),r.a.createElement("p",{className:"font-light ml-4 pl-1"},e.contact.phone_number)),r.a.createElement("div",{className:"position-relative"},r.a.createElement("span",{className:"oi oi-briefcase text-muted mr-3 align-middle pt-1 position-absolute"}),r.a.createElement("p",{className:"font-light ml-4 pl-1"},e.contact.job_title)),r.a.createElement("div",{className:"position-relative"},r.a.createElement("span",{className:"oi oi-map-marker text-muted mr-3 align-middle pt-1 position-absolute"}),r.a.createElement("p",{className:"font-light ml-4 pl-1"},e.contact.address)),r.a.createElement("div",{className:"position-relative"},r.a.createElement("span",{className:"oi oi-envelope-closed text-muted mr-3 align-middle pt-1 position-absolute"}),r.a.createElement("p",{className:"font-light ml-4 mb-4 pl-1"},e.contact.email)))},f=a(7),v=a(10),g=function(e){return r.a.createElement("div",{className:"modal fade",id:"deleteConfirmationModal",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-sm",role:"document"},r.a.createElement("div",{className:"modal-content bg-dark"},r.a.createElement("div",{className:"modal-header bg-dark text-light border-secondary"},r.a.createElement("h5",{className:"modal-title",id:"deleteModalLabel"},"Delete Contact"),r.a.createElement("button",{type:"button",className:"close text-light","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body rounded-bottom bg-dark"},r.a.createElement("p",{className:"text-light text-left"},"Are you sure you want to delete this contact?"),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{type:"button",className:"btn btn-secondary mr-2","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(t){return e.handleDelete(t)}},"Delete"))))))},E=a(11),N=a.n(E),w=a(6),C=a.n(w),k=(a(25),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={contact:e.contact,requestAttrs:a.buildRequestAttrs()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"p-4"},r.a.createElement("form",{className:"form-horizontal mb-4",id:"contact_form",onSubmit:function(t){e.handleSubmit(t)}},r.a.createElement("div",{className:"mb-4 text-center"},r.a.createElement(h,{identifier:this.state.contact.email||"random"}),r.a.createElement("input",{className:"form-control form-control-lg text-center mb-4 bg-dark border border-bottom text-light border-secondary rounded-0 border-top-0 border-left-0 border-right-0",value:this.state.contact.name,name:"name",placeholder:"Name",type:"text","data-required":"true",autoFocus:!0,autoComplete:"nope",onChange:function(t){e.handleOnChange(t)},onBlur:function(t){e.validateInput(t.target.value,t.target.name)}}),r.a.createElement("div",{className:"invalid-feedback"})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"border border-bottom text-muted input-group-text bg-dark border-secondary rounded-0 border-top-0 border-left-0 border-right-0"},r.a.createElement("span",{className:"oi oi-phone align-bottom"}))),r.a.createElement("input",{className:"form-control bg-dark border border-bottom text-light border-secondary rounded-0 border-top-0 border-left-0 border-right-0",value:this.state.contact.phone_number,name:"phone_number",placeholder:"Phone Number",type:"text","data-required":"true",autoComplete:"nope",onChange:function(t){e.handleOnChange(t)},onBlur:function(t){e.validateInput(t.target.value,t.target.name)}}),r.a.createElement("div",{className:"invalid-feedback"})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"border border-bottom text-muted input-group-text bg-dark border-secondary rounded-0 border-top-0 border-left-0 border-right-0"},r.a.createElement("span",{className:"oi oi-briefcase align-bottom"}))),r.a.createElement("input",{className:"form-control bg-dark border border-bottom text-light border-secondary rounded-0 border-top-0 border-left-0 border-right-0",value:this.state.contact.job_title,name:"job_title",placeholder:"Job Title",type:"text",autoComplete:"nope",onChange:function(t){e.handleOnChange(t)},onBlur:function(t){e.validateInput(t.target.value,t.target.name)}}),r.a.createElement("div",{className:"invalid-feedback"})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"border border-bottom text-muted input-group-text bg-dark border-secondary rounded-0 border-top-0 border-left-0 border-right-0"},r.a.createElement("span",{className:"oi oi-map-marker align-bottom"}))),r.a.createElement("input",{className:"form-control bg-dark border border-bottom text-light border-secondary rounded-0 border-top-0 border-left-0 border-right-0",value:this.state.contact.address,name:"address",placeholder:"Address",type:"text",autoComplete:"nope",onChange:function(t){e.handleOnChange(t)},onBlur:function(t){e.validateInput(t.target.value,t.target.name)}}),r.a.createElement("div",{className:"invalid-feedback"})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"border border-bottom text-muted input-group-text bg-dark border-secondary rounded-0 border-top-0 border-left-0 border-right-0"},r.a.createElement("span",{className:"oi oi-envelope-closed align-bottom"}))),r.a.createElement("input",{className:"form-control bg-dark border border-bottom text-light border-secondary rounded-0 border-top-0 border-left-0 border-right-0",value:this.state.contact.email,name:"email",placeholder:"Email",type:"text","data-required":"true",autoComplete:"nope",onChange:function(t){e.handleOnChange(t)},onBlur:function(t){e.validateInput(t.target.value,t.target.name)}}),r.a.createElement("div",{className:"invalid-feedback"})),r.a.createElement("button",{type:"submit",className:"d-none"},"Submit")),"edit"===this.props.view?r.a.createElement("div",{className:"mb-4 text-center"},r.a.createElement("button",{className:"btn btn-link text-danger","data-toggle":"modal","data-target":"#deleteConfirmationModal"},r.a.createElement("span",{className:"oi oi-trash mr-2"}),"Delete Contact"),r.a.createElement(g,{handleDelete:function(t){return e.handleDelete(t)}})):null)}},{key:"handleOnChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(function(e){return{contact:Object(v.a)({},e.contact,Object(f.a)({},"".concat(t),a))}})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.contactIsInvalid())return!1;fetch(this.state.requestAttrs.url,{method:this.state.requestAttrs.method,body:JSON.stringify({user_contact:this.state.contact}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if("new"===t.props.view)t.props.contacts.unshift(e),t.props.handleContactCreate(t.props.contacts,e);else if("edit"===t.props.view){var a=t.props.contacts.findIndex(function(t){return t.id===e.id});t.props.contacts.splice(a,1,e),t.props.handleContactUpdate(t.props.contacts,e)}}).catch(function(e){return console.error("Error:",e)})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),fetch(this.state.requestAttrs.url,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(e){if(204===e.status){var a=t.props.contacts.findIndex(function(e){return e.id===t.state.contact.id});t.props.contacts.splice(a,1),C()("#deleteConfirmationModal").modal("hide"),t.props.handleContactDelete(t.props.contacts)}}).then(function(e){console.log(e)}).catch(function(e){return console.error("Error:",e)})}},{key:"contactIsInvalid",value:function(){var e=this,t=[];return N.a.each(this.state.contact,function(a,n){if("id"!==n&&"created_at"!==n&&"updated_at"!==n){var r=e.validateInput(a,n);r.length&&t.push(r)}}),t.length>0}},{key:"validateInput",value:function(e,t){var a=document.querySelector("#contact_form input[name='".concat(t,"']")),n="",r=!0;if(a.classList.remove("is-invalid"),"true"===a.dataset.required&&""===e)r=!1,n="Please Enter a ".concat(t);else if("phone_number"===a.name){/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(e)||(r=!1,n="Phone Number format is invalid")}else if("email"===a.name){/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(r=!1,n="Email format is invalid")}return!r&&n.length&&(a.nextElementSibling.innerHTML=n,a.classList.add("is-invalid")),n}},{key:"buildRequestAttrs",value:function(){switch(this.props.view){case"new":return{method:"POST",url:"https://www.ramindergoraya.com/api/v1/user_contacts"};case"edit":return{method:"PUT",url:"https://www.ramindergoraya.com/api/v1/user_contacts/".concat(this.props.contact.id)};default:return{method:"POST",url:"https://www.ramindergoraya.com/api/v1/user_contacts"}}}}]),t}(n.Component)),y=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;switch(this.props.view){case"view_all":var t=this.props.contacts.map(function(t,a){return r.a.createElement(p,{key:a,contact:t,handleContactClick:function(){e.props.handleContactClick(t)}})});return r.a.createElement("ul",{className:"list-group"},t);case"view":return r.a.createElement(b,{contact:this.props.selectedContact});case"edit":return r.a.createElement(k,{contact:this.props.selectedContact,contacts:this.props.contacts,view:this.props.view,handleContactUpdate:function(t,a){e.props.handleCreateOrUpdate(t,a)},handleContactDelete:function(t){return e.props.handleContactDelete(t)}});case"new":return r.a.createElement(k,{contact:{name:"",phone_number:"",job_title:"",address:"",email:""},contacts:this.props.contacts,view:this.props.view,handleContactCreate:function(t,a){e.props.handleCreateOrUpdate(t,a)}});default:return r.a.createElement("div",null,"Contacts")}}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={contacts:[],view:"view_all",selectedContact:{},loading:!0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://www.ramindergoraya.com/api/v1/user_contacts.json").then(function(e){return e.json()}).then(function(t){e.setState({contacts:t,loading:!1})})}},{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 mx-auto bg-dark text-light p-0 card"},r.a.createElement("div",{className:"card-header shadow"},r.a.createElement(u,{view:this.state.view,selectedContact:this.state.selectedContact,onHeaderViewChange:function(t){e.setState({view:t})},handleSearch:function(t){e.searchContacts(t)}})),r.a.createElement("div",{className:"card-body px-0 pb-0"},this.state.contacts.length?r.a.createElement(y,{view:this.state.view,contacts:this.state.contacts,selectedContact:this.state.selectedContact,handleContactClick:function(t){e.setState({selectedContact:t,view:"view"})},handleContactDelete:function(t){return e.setState({contacts:t,view:"view_all"})},handleCreateOrUpdate:function(t,a){return e.setState({contacts:t,selectedContact:a,view:"view"})}}):r.a.createElement("div",{className:"p-4 text-center"},this.state.loading?"Loading...":"No contacts found")),r.a.createElement("div",{className:"card-footer text-muted text-center"},r.a.createElement("small",null,"A React JS App on a Rails site"))))}},{key:"searchContacts",value:function(e){var t=this;this.setState({loading:!0}),fetch("https://www.ramindergoraya.com/api/v1/user_contacts.json?search=".concat(e)).then(function(e){return e.json()}).then(function(e){t.setState({contacts:e,loading:!1})})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.bb0c121f.chunk.js.map